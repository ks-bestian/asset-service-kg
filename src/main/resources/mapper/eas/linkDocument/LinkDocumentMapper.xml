<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.bestiansoft.ebillservicekg.eas.linkDocument.repository.LinkDocumentRepository">
    <insert id="insertLinkDocument" parameterType="kr.co.bestiansoft.ebillservicekg.eas.linkDocument.vo.LinkDocumentVo">
        INSERT INTO kgst.eas_link_document
            (from_doc_id, to_doc_id, link_type, reg_dtm, reg_id)
        VALUES(#{fromDocId}, #{toDocId}, #{linkType}, #{regDtm}, #{regId});
    </insert>
    <delete id="deleteLinkDocument">
        delete
          from kgst.eas_link_document
         where from_doc_id =#{fromDocId}
           and to_doc_id =#{toDocId}
    </delete>
    <select id="getLinkDocumentByDocId" resultType="kr.co.bestiansoft.ebillservicekg.eas.linkDocument.vo.LinkDocumentVo">
        select link_id, from_doc_id, to_doc_id, link_type, reg_dtm, reg_id
        from kgst.eas_link_document
        where from_doc_id = #{docId}
        union distinct
        select link_id, from_doc_id, to_doc_id, link_type, reg_dtm, reg_id
        from kgst.eas_link_document
        where to_doc_id = #{docId}
    </select>
    <select id="getLinkDocumentByDocIdAndType" resultType="kr.co.bestiansoft.ebillservicekg.eas.linkDocument.vo.LinkDocumentVo">
        select link_id, from_doc_id, to_doc_id, link_type, reg_dtm, reg_id
          from kgst.eas_link_document
         where to_doc_id = #{docId}
           and link_type = #{linkType}
    </select>
    <select id="getLinkDocument" resultType="kr.co.bestiansoft.ebillservicekg.eas.linkDocument.vo.LinkDocumentVo">
        select link_id, from_doc_id, to_doc_id, link_type, reg_dtm, reg_id
        from kgst.eas_link_document
        where link_id = #{linkId}
    </select>
</mapper>