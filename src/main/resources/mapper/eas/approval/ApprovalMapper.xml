<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.bestiansoft.ebillservicekg.eas.approval.repository.ApprovalRepository">
    <insert id="insertApproval" parameterType="kr.co.bestiansoft.ebillservicekg.eas.approval.vo.ApprovalVo">
        INSERT INTO kgst.eas_approval
        (doc_id, user_id, user_nm, dept_cd, job_cd, apvl_ord, apvl_dtm, rcv_dtm, check_dtm, apvl_file_id, apvl_opinion, apvl_status_cd)
        VALUES(#{docId}, #{userId}, #{userNm}, #{deptCd}, #{jobCd}, #{apvlOrd}, #{apvlDtm}, #{rcvDtm}, #{checkDtm}, #{apvlFileId}, #{apvlOpinion}, #{apvlStatusCd});
    </insert>
    <update id="updateStatus">
        update kgst.eas_approval
           set apvl_status_cd = #{apvlStatusCd}
         where apvl_id = #{apvlId}
    </update>
    <update id="updateApproval" parameterType="kr.co.bestiansoft.ebillservicekg.eas.approval.vo.UpdateApprovalVo">
        update kgst.eas_approval
        <set>
            <if test="apvlDtm != null">  apvl_dtm = #{apvlDtm}, </if>
            <if test="rcvDtm != null"> rcv_dtm = #{rcvDtm},  </if>
            <if test="checkDtm != null">  check_dtm = #{checkDtm},  </if>
            <if test="apvlOpinion != null"> apvl_opinion = #{apvlOpinion},  </if>
            <if test="apvlFileId != null"> apvl_file_id = #{apvlFileId}, </if>
            <if test="apvlStatusCd != null"> apvl_status_cd = #{apvlStatusCd}, </if>
        </set>
        where apvl_id = #{apvlId}
    </update>

</mapper>