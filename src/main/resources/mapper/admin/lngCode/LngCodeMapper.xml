<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.bestiansoft.ebillservicekg.admin.lngCode.repository.LngCodeMapper">

    <select id="getLngCodeList" parameterType="java.util.HashMap"
            resultType="kr.co.bestiansoft.ebillservicekg.admin.lngCode.vo.LngCodeVo">
        /* QueryID : kr.co.bestiansoft.ebillservicekg.admin.lngCode.repository.LngCodeMapper.getLngCodeList */
        select
        row_number() over(order by reg_dt desc) as num
        , lng_id
        , lng_ty1
        , lng_ty2
        , lng_ty3
        , rmk
        , reg_id
        , reg_dt
        , mod_id
        , mod_dt
        from com_lng_code
        where 1=1
        <if test="lng_ty1 != null and lng_ty1 != ''">
            and lng_ty1 like concat('%', #{lngTy1}, '%')
        </if>
        <if test="lng_ty2 != null and lng_ty2 != ''">
            and lng_ty2 like concat('%', #{lngTy2}, '%')
        </if>
        <if test="lng_ty3 != null and lng_ty3 != ''">
            and lng_ty3 like concat('%', #{lngTy3}, '%')
        </if>
    </select>

    <insert id="insertLngCode" parameterType="kr.co.bestiansoft.ebillservicekg.admin.lngCode.vo.LngCodeVo">
        insert into com_lng_code (
            lng_id
            , lng_ty1
            , lng_ty2
            , lng_ty3
            , rmk
            , reg_id
            , reg_dt
            , mod_id
            , mod_dt
        )
        values (
            #{lngId},
            #{lngTy1},
            #{lngTy2},
            #{lngTy3},
            #{rmk},
            #{regId},
            now(),
            null,
            null
        )
    </insert>

    <select id="createLngId" resultType="java.lang.Long">
        select coalesce(max(lng_id) + 1, 10000) from com_lng_code
    </select>

    <update id="updateLngCode" parameterType="kr.co.bestiansoft.ebillservicekg.admin.lngCode.vo.LngCodeVo">
        update com_lng_code
        set
        lng_ty1 = #{lngTy1},
        lng_ty2 = #{lngTy2},
        lng_ty3 = #{lngTy3},
        rmk = #{rmk},
        mod_id = #{modId},
        mod_dt = #{modDt}
        where lng_id = #{lngId}
    </update>

    <delete id="deleteLngCode" parameterType="java.lang.Long">
        delete from com_lng_code
        where lng_id = #{lngId}
    </delete>

    <select id="getLngCodeById" parameterType="java.lang.Long">
        select
        row_number() over(order by reg_dt desc) as num
        , lng_id
        , lng_ty1
        , lng_ty2
        , lng_ty3
        , rmk
        , reg_id
        , reg_dt
        , mod_id
        , mod_dt
        from com_lng_code
        where lng_id = #{lngId}
    </select>

</mapper>