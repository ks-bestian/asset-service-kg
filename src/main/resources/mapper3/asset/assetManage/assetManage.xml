<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.bestiansoft.ebillservicekg.asset.bzenty.repository.BzentyMapper">

    <select id="selectListBzenty" parameterType="java.util.HashMap" resultType="kr.co.bestiansoft.ebillservicekg.asset.bzenty.vo.BzentyVo">
        /* QueryID : kr.co.bestiansoft.ebillservicekg.asset.bzenty.repository.selectListBzenty */
		SELECT
			bzenty_id
			, bzenty_nm_1
			, bzenty_nm_2
			, bzenty_nm_3
			, telno
			, eml
			, pic_nm
			, use_yn
			, reg_dt
			, rgtr_id
			, mdfcn_dt
			, mdfr_id
		FROM
			asset_uzb.ams_bzenty
		where 1=1
		<if test="bzentyNm != null and bzentyNm !=''">
		    <choose>
		        <when test="lang == 'lng_type_1'">
		            and bzenty_nm_1 like concat('%', #{bzentyNm}, '%')
		        </when>
		        <when test="lang == 'lng_type_2'">
		            and bzenty_nm_2 like concat('%', #{bzentyNm}, '%')
		        </when>
		        <otherwise>
		            and bzenty_nm_3 like concat('%', #{bzentyNm}, '%')
		        </otherwise>
		    </choose>
		</if>
		order by reg_dt desc
    </select>
    
    <insert id="insertBzenty" parameterType="kr.co.bestiansoft.ebillservicekg.asset.bzenty.vo.BzentyVo">
        
        INSERT INTO asset_uzb.ams_bzenty (
			bzenty_id
			, bzenty_nm_1
			, bzenty_nm_2
			, bzenty_nm_3
			, telno
			, eml
			, pic_nm
			, use_yn
			, rgtr_id
			, reg_dt
			, mdfcn_dt
			, mdfr_id
		) VALUES (
			'BZ' || LPAD(NEXTVAL('asset_uzb.bzenty_seq')::TEXT, 6, '0'),
			#{bzentyNm1},
			#{bzentyNm2},
			#{bzentyNm3},
			#{telno},
			#{eml},
			#{picNm},
			#{useYn},
			#{rgtrId},
            now(),
            null,
            null
		)
    </insert>

</mapper>